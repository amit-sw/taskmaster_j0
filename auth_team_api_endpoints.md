# Authentication and Team Management API Endpoints

This document defines API endpoints for user registration, login, team creation, adding users to teams, and retrieving team details.

---

**Assumptions:**
*   Session management uses tokens (e.g., JWT) returned upon successful login.
*   The backend handles password hashing for user registration.
*   Permissions for adding users to teams or accessing team details are handled by the backend logic (e.g., only team admins or authenticated users can perform certain actions).

---

## 1. User Registration

*   **HTTP Method:** `POST`
*   **URL Path:** `/api/auth/register`
*   **Brief Description:** Creates a new user account.
*   **Example Request Body:**
    ```json
    {
      "name": "John Doe",
      "email": "john.doe@example.com",
      "password": "securepassword123"
    }
    ```
*   **Example Response Body (201 Created):**
    ```json
    {
      "id": 1,
      "name": "John Doe",
      "email": "john.doe@example.com",
      "team_id": null,
      "created_at": "2024-01-18T10:00:00Z",
      "updated_at": "2024-01-18T10:00:00Z"
    }
    ```
    *(Note: The response does not include the password hash.)*

---

## 2. User Login

*   **HTTP Method:** `POST`
*   **URL Path:** `/api/auth/login`
*   **Brief Description:** Authenticates a user and returns a session token (e.g., JWT).
*   **Example Request Body:**
    ```json
    {
      "email": "john.doe@example.com",
      "password": "securepassword123"
    }
    ```
*   **Example Response Body (200 OK):**
    ```json
    {
      "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoiam9obi5kb2VAZXhhbXBsZS5jb20iLCJpYXQiOjE2NzUzOTg0MDAsImV4cCI6MTY3NTQwMjAwMH0.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",
      "user": {
        "id": 1,
        "name": "John Doe",
        "email": "john.doe@example.com",
        "team_id": null
      }
    }
    ```

---

## 3. Create a New Team

*   **HTTP Method:** `POST`
*   **URL Path:** `/api/teams`
*   **Brief Description:** Allows an authenticated user to create a new team. The user creating the team is typically added as the first member/admin.
*   **Example Request Body:**
    ```json
    {
      "name": "Marketing Team Alpha"
    }
    ```
*   **Example Response Body (201 Created):**
    ```json
    {
      "id": 101,
      "name": "Marketing Team Alpha",
      "created_at": "2024-01-18T11:00:00Z",
      "updated_at": "2024-01-18T11:00:00Z"
    }
    ```
    *(The backend should handle associating the creating user with this team, e.g., by updating the user's `team_id` or through a separate team membership table if a user could belong to multiple teams - though the current schema `Users.team_id` implies one team per user).*

---

## 4. Add User to Team

*   **HTTP Method:** `POST`
*   **URL Path:** `/api/teams/{team_id}/members`
*   **Brief Description:** Adds a user to a specified team by updating the user's `team_id`. This assumes a user can only belong to one team as per the current `Users.team_id` schema. Requires appropriate permissions for the authenticated user.
*   **Example Request Body:**
    ```json
    {
      "user_id": 2 
    }
    ```
*   **Example Response Body (200 OK):**
    ```json
    {
      "message": "User with ID 2 successfully added to team with ID 101.",
      "team_id": 101,
      "user_id": 2 
    }
    ```
    *(Alternatively, return the updated team details or user details. If the user was already in another team, this implies their `team_id` is reassigned).*

---

## 5. Get Team Details

*   **HTTP Method:** `GET`
*   **URL Path:** `/api/teams/{team_id}`
*   **Brief Description:** Retrieves a team's information, including its name and a list of its members.
*   **Example Request Body:** N/A
*   **Example Response Body (200 OK):**
    ```json
    {
      "id": 101,
      "name": "Marketing Team Alpha",
      "created_at": "2024-01-18T11:00:00Z",
      "updated_at": "2024-01-18T11:00:00Z",
      "members": [
        {
          "user_id": 1,
          "name": "John Doe",
          "email": "john.doe@example.com"
        },
        {
          "user_id": 2,
          "name": "Jane Smith",
          "email": "jane.smith@example.com" 
        }
      ]
    }
    ```
    *(The `members` list is generated by querying the `Users` table for all users with `team_id` matching `{team_id}`).*
